import json
from typing import List, Dict, Any
from base_driver import BaseDriver, BaseProblemDriver
from solution import range_max_subset_xor


class XorBasisRangeQueriesDriver(BaseProblemDriver):
    """Problem-specific driver for XOR Basis Range Queries."""

    def parse_test_cases(self, input_data: Any, expected_output: Any) -> List[Dict[str, Any]]:
        input_array = json.loads(input_data) if isinstance(input_data, str) else input_data
        expected_array = json.loads(expected_output) if isinstance(expected_output, str) else expected_output

        test_cases = []

        for i in range(len(input_array)):
            nums = input_array[i][0]
            queries = input_array[i][1]
            test_cases.append({
                'input': {'nums': nums, 'queries': queries},
                'expectedOutput': expected_array[i]
            })

        return test_cases

    def execute_test_case(self, test_case: Dict[str, Any], index: int) -> Any:
        nums = test_case['input']['nums']
        queries = test_case['input']['queries']
        return range_max_subset_xor(nums, queries)

    def compare_results(self, actual: Any, expected: Any) -> bool:
        return actual == expected


def main():
    driver = BaseDriver(XorBasisRangeQueriesDriver())
    driver.run()


if __name__ == "__main__":
    main()
